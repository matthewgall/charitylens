{{define "error.html"}}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{if .Title}}{{.Title}}{{else}}Error{{end}} - CharityLens</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/main.css">
</head>
<body class="flex-layout">
    {{template "header" .}}
    
    <!-- Error Content -->
    <div class="error-container">
        <div class="error-content">
            {{if .IsLoading}}
                <div class="loading-spinner"></div>
                <h1 class="error-title">Loading Charity Data</h1>
                <p class="error-message">
                    We're fetching the latest information for this charity from the Charity Commission. 
                    This usually takes just a few seconds.
                </p>
                <div class="error-actions">
                    <button class="button button-secondary" onclick="window.location.reload()">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                        </svg>
                        Refresh Page
                    </button>
                </div>
            {{else if eq .Code 404}}
                <svg class="error-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                <h1 class="error-title">{{if .Title}}{{.Title}}{{else}}Not Found{{end}}</h1>
                <p class="error-message">
                    {{if .Message}}{{.Message}}{{else}}We couldn't find the charity you're looking for. It may have been removed or the number might be incorrect.{{end}}
                </p>
            {{else}}
                <div class="error-code">{{if .Code}}{{.Code}}{{else}}500{{end}}</div>
                <h1 class="error-title">{{if .Title}}{{.Title}}{{else}}Something went wrong{{end}}</h1>
                <p class="error-message">
                    {{if .Message}}{{.Message}}{{else}}We encountered an error while processing your request. Please try again later.{{end}}
                </p>
            {{end}}
            
            {{if not .IsLoading}}
            <div class="error-actions">
                <a href="/" class="button button-primary">
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                    </svg>
                    Back to Home
                </a>
                {{if .RetryURL}}
                <a href="{{.RetryURL}}" class="button button-secondary">
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                    </svg>
                    Try Again
                </a>
                {{end}}
            </div>
            {{end}}
        </div>
    </div>

    {{if .IsLoading}}
    <script>
        // Auto-refresh after 3 seconds
        setTimeout(() => {
            window.location.reload();
        }, 3000);
    </script>
    {{end}}

    {{template "footer" .}}
</body>
</html>
{{end}}
